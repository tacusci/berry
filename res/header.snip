<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title><%= title %></title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="/css/font.css">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/skeleton.css">
  <link rel="stylesheet" href="/css/custom.css">
  <%= if (quillenabled) { %>
  <link rel="stylesheet" href="/css/quill.core.css">
  <link rel="stylesheet" href="/css/quill.snow.css">
  <% } %>

  <!-- Scripts
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script src="/js/libs/jquery/2.1.1/jquery.min.js"></script>
  <%= if (quillenabled) { %>
  <script src="/js/libs/quill/quill.min.js"></script>
  <% } %>
  <script src="/js/site.js"></script>

  <%= if (quillenabled) { %>
  <style>
    body > #standalone-container {
      margin: 50px auto;
      max-width: 720px;
    }
    #editor-container {
      height: 60vh;
    }
  </style>
  <% } %>

</head>

<%= contentFor("navdashboardheader") { %>
<div class="navbar-spacer"></div>
        <nav class="navbar">
          <div class="container">
            <ul class="navbar-list">
              <%= contentOf("navdashboardlinks") %>
<% } %>

<%= contentFor("navdashboardfooter") { %>
</ul>
          </div>
        </nav>
<% } %>

<%= contentFor("navdashboardlinks") { %>
<li class="navbar-item">
  <a class="navbar-link" href="/admin" data-popover="#dashboardPopover">Dashboard</a>
  <div id="dashboardPopover" class="popover">
  <ul class="popover-list">
    <li class="popover-item">
      <a class="popover-link" href="/admin">Home</a>
    </li>
    <li class="popover-item">
      <a class="popover-link" href="/admin/pages">Pages</a>
    </li>
    <li class="popover-item">
      <a class="popover-link" href="/admin/users">Users</a>
    </li>
    <li class="popover-item">
      <form action="/logout" method="POST" style="margin-bottom: 0rem !important"><input class="popover-input" type="submit" value="Logout"></form>
    </li>
  </ul>
</div>
</li>
<% } %>

<%= contentFor("quilleditorform") { %>
<form id="pageeditorform" action="<%= submitroute %>" method="POST">
          <div class="row">
            <div class="six columns">
              <label>Title</label><input class="u-full-width" name="title" type="text" value="<%= pagetitle %>">
            </div>
            <div class="six columns">
              <label>Route</label><input class="u-full-width" name="route" type="text" value="<%= pageroute %>">
            </div>
          </div>
          <div id="toolbar-container">
            <span class="ql-formats">
              <select class="ql-font"></select>
              <select class="ql-size"></select>
            </span>
            <span class="ql-formats">
              <button class="ql-bold"></button>
              <button class="ql-italic"></button>
              <button class="ql-underline"></button>
              <button class="ql-strike"></button>
            </span>
            <span class="ql-formats">
              <select class="ql-color"></select>
              <select class="ql-background"></select>
            </span>
            <span class="ql-formats">
              <button class="ql-script" value="sub"></button>
              <button class="ql-script" value="super"></button>
            </span>
            <span class="ql-formats">
              <button class="ql-header" value="1"></button>
              <button class="ql-header" value="2"></button>
              <button class="ql-blockquote"></button>
              <button class="ql-code-block"></button>
            </span>
            <span class="ql-formats">
              <button class="ql-list" value="ordered"></button>
              <button class="ql-list" value="bullet"></button>
              <button class="ql-indent" value="-1"></button>
              <button class="ql-indent" value="+1"></button>
            </span>
            <span class="ql-formats">
              <button class="ql-direction" value="rtl"></button>
              <select class="ql-align"></select>
            </span>
            <span class="ql-formats">
              <button class="ql-link"></button>
              <button class="ql-image"></button>
              <button class="ql-video"></button>
              <button class="ql-formula"></button>
            </span>
            <span class="ql-formats">
              <button class="ql-clean"></button>
            </span>
          </div>
        <div id="editor-container"></div>
        <input name="pagecontent" type="hidden">
        <div class="row">
          <div class="twelve columns">
            <button class="button-primary" style="margin-top: 1.5rem" onclick="submitPageEditorForm()">Save</button>
          </div>
        </div>
      </form>

<script>
  function submitPageEditorForm() {
    var pageEditorForm = document.forms["pageeditorform"]
    pageEditorForm.elements["pagecontent"].value = JSON.stringify(quill.getContents());
    pageeditorform.submit();
  }
</script>
<% } %>
